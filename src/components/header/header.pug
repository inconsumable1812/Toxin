include ../../components/logo/logo.pug
include ../../components/button/button.pug

mixin header(options)
  - const { menuLinkDefault } = require('../../components/header/default-link.json');
  - const { menuLink = menuLinkDefault, auth = false } = options || {};
  - let classLink = 'header__link';
  - let classSubMenu = 'header__sub-menu';
  - let classSubLink = 'header__link header__sub-link';
  - let classUser = 'header__user-menu';

  .header.js-header
    .header__container
      nav.header__navigation 
        .header__logo
          +logo(true)
        button.header__burger.js-header__burger.material-icons= 'menu'
        .header__menu-group.js-header__menu-group
          ul.header__menu
            each link in menuLink
              - const classLink = link.bold ? 'header__link header_bold' : 'header__link';
              - const classSubMenu = link.bold ? 'header__sub-menu js-header__sub-menu header_bold' : 'header__sub-menu js-header__sub-menu';
              if !link.subMenu
                a(class=classLink, href=link.href)= link.name
              if link.subMenu
                div(class=classSubMenu) 
                  a(class=classLink, href=link.href)= link.name
                  .header__dropdown.js-header__dropdown
                    each subLink in link.subMenu
                      a(class=classSubLink, href=subLink.href)= subLink.name
                  span.header__sub-menu-icon.js-header__sub-menu-icon.material-icons= 'expand_more'
          if !auth
            - classUser += ' header__userMenu_notAuth';
            div(class=classUser)
              +button({theme: 'white', textTheme: 'purple', text: 'войти', href: './sign-in-page.html'})
              +button({theme: 'purple', textTheme: 'white', text: 'зарегистрироваться', href: './registration.html'}) 
          if auth
            - classUser += ' header__userMenu_auth';
            div(class=classUser)
              a.header__user-name(href="./error-page.html")= `${auth.name} ${auth.surname}`
